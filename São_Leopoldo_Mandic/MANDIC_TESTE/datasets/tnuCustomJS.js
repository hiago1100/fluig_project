function createDataset(fields, constraints, sortFields) {

	var dataset =  DatasetBuilder.newDataset();
	dataset.addColumn("liv");
	dataset.addColumn("name");
	dataset.addColumn("version");
	dataset.addColumn("revision");
	dataset.addColumn("src");
	dataset.addColumn("author");
	
	dataset.addRow(["com.totvsNacoesUnidas.fluig.js.Properties",
	                "prop",
	                "1",
	                "0",
	                '({simpleMerge:function(e,a){var t={};for(attrname in e)t[attrname]=e[attrname];for(attrname in a)t[attrname]=a[attrname];return t},props:new java.util.HashMap,load:function(e){var a=this.simpleMerge({type:"DATASET",keyColumn:"chave",valueColumn:"valor",log:0,datasetName:"TNUProperties",jndiName:"java:/jdbc/FluigDS",sql:"",path:"propertiesX.properties"},e);if("DATASET"==a.type)this.loadFromDataset(a);else{if("SQL"!=a.type)throw"Nao esta implementado o type "+a.type;this.loadFromSQL(a)}},get:function(e,a){var t=this.props.get(e);if(null==t&&void 0!=typeof a)throw"Nao encontrou a property com chave "+e;return t},loadFromDataset:function(e){if(!e.datasetName)throw"Deve indicar o parametro datasetName";e.log&&log.info("*** loadFromDataset - Carregando properties do dataset "+e.datasetName);var a=DatasetFactory.getDataset(e.datasetName,null,null,null);if(null==a)throw"*** Nao encontrou o dataset: "+e.datasetName;e.log&&log.info("*** loadFromDataset - ds.rowsCount "+a.rowsCount);for(var t=0;t<a.rowsCount;t++){var o=a.getValue(t,e.keyColumn),r=a.getValue(t,e.valueColumn);e.log&&log.info("*** loadFromDataset - key:"+o+" value: "+r),this.props.put(o,r)}},loadFromSQL:function(e){var a=null,t=null;if(""==e.sql)throw"Deve informar o parametro sql";try{for(e.log&&log.info("** Obtendo conexao "+e.jndiName),a=(new javax.naming.InitialContext).lookup(e.jndiName).getConnection(),t=a.createStatement(),e.log&&log.info("** Executando query "+e.sql),rs=t.executeQuery(e.sql);rs.next();){var o=rs.getString(e.keyColumn),r=rs.getString(e.valueColumn);e.log&&log.info("*** loadFromDataset - key:"+o+" value: "+r),props.put(o,r)}}catch(l){throw"Erro ao carregar properties do SQL"+l}finally{null!=t&&t.close(),null!=a&&a.close()}}})',
	                "TNU"]);
	
	dataset.addRow(["com.totvsNacoesUnidas.fluig.js.ws.BPM",
	                "bpm",
	                "1",
	                "0",
	                '({simpleMerge:function(e,a){var t={};for(attrname in e)t[attrname]=e[attrname];for(attrname in a)t[attrname]=a[attrname];return t},startProcess:function(e){var a=this.simpleMerge({username:"",password:"",companyId:"",processId:"",choosedState:0,colleagueIds:[],comments:"",userId:"",completeTask:!0,attachments:[],cardData:{},managerMode:!0,workflowPackage:"com.fluig.bpm",workflowServiceName:"ECMWorkflowEngineService",log:0},e);try{var t=ServiceManager.getService(a.workflowServiceName).getBean(),o=t.instantiate(a.workflowPackage+".ECMWorkflowEngineServiceService"),r=o.getWorkflowEngineServicePort(),n=org.apache.commons.io.IOUtils,c=function(e){for(var o=t.instantiate(a.workflowPackage+".StringArray"),r=0;r<e.length;r++)o.getItem().add(e[r].toString());return o},s=c(a.colleagueIds),i=t.instantiate(a.workflowPackage+".ProcessAttachmentDtoArray"),l=t.instantiate(a.workflowPackage+".StringArrayArray"),g=t.instantiate(a.workflowPackage+".ProcessTaskAppointmentDtoArray");if(a.cardData){a.log&&log.info("*** Existe cardData ");for(valor in a.cardData){a.log&&log.info("*** 1 cardData "+valor+": "+a.cardData[valor]);var m=c([valor,a.cardData[valor]]);l.getItem().add(m)}}if(a.log&&log.info("*** cardData.getItem() "+l.getItem()),a.attachments){a.log&&log.info("*** Existe Attach ");for(var d=0;d<a.attachments.length;d++){var f=a.attachments[d].description,w=a.attachments[d].path;a.log&&log.info("*** attach "+f+": "+w);var I=t.instantiate(a.workflowPackage+".ProcessAttachmentDto"),p=t.instantiate(a.workflowPackage+".Attachment"),v=new java.io.File(w),k=new java.io.FileInputStream(v),h=n.toByteArray(k);k.close(),a.log&&log.info("***  1  Existe: "+v.exists()+" leng:"+h.length),p.setAttach(!0),p.setFileName(v.getName()),p.setPrincipal(!0),p.setFilecontent(h),I.setDescription(f),I.setNewAttach(!0),I.setFileName(v.getName()),I.setDeleted(!1),I.getAttachments().add(p),i.getItem().add(I)}}log.info("**** Iniciando processo "+a.processId+"....");var u=r.startProcess(a.username,a.password,a.companyId,a.processId,a.choosedState,s,a.comments,a.userId,a.completeTask,i,l,g,a.managerMode);a.log&&log.info("***  Resultado do inicio processo: "+a.processId+" "+u);var S="",P="";if(null!=u)for(var d=0;d<u.getItem().size();d++){var y=u.getItem().get(d),E=y.getItem().get(0),A=y.getItem().get(1);a.log&&log.info("***  Resultado inicio processo: "+a.processId+" "+E+": "+A),"iProcess"==E?S=A:"ERROR"==E&&(P=A)}if(""==S)throw"Erro iniciando processo: "+P;return log.info("**** Processo inciado"+a.processId+" iProcess:"+S),S}catch(D){throw log.error("*** Erro ao criar processo automatico "+a.processId+" :"+D),D}},cancelInstance:function(params){var e=this.simpleMerge({username:"",password:"",companyId:"",processInstanceId:"",userId:"",cancelText:"",workflowPackage:"com.fluig.bpm",workflowServiceName:"ECMWorkflowEngineService",log:0},params);try{var a=ServiceManager.getService(e.workflowServiceName).getBean(),t=a.instantiate(e.workflowPackage+".ECMWorkflowEngineServiceService"),o=t.getWorkflowEngineServicePort();log.info("**** cancelInstance "+e.processInstanceId+"....");var r=o.cancelInstance(e.username,e.password,e.companyId,e.processInstanceId,e.userId,e.cancelText);if(e.log&&log.info("***  Resultado cancelInstance: "+e.processInstanceId+" "+r),"OK"!=r)throw r}catch(n){throw log.error("*** Erro no cancelInstance "+e.processInstanceId+" :"+n),n}}})',
	                "TNU"]);	
	
	dataset.addRow(["com.totvsNacoesUnidas.fluig.js.ds.Sql",
	                "sql",
	                "1",
	                "0",
	                '({error:function(r){log.error("*** com.totvsNacoesUnidas.fluig.js.ds.Sql: "+r);var e=DatasetBuilder.newDataset();return log.error(r),e.addColumn("error"),e.addRow(new Array(r)),e},simpleMerge:function(r,e){var t={};for(attrname in r)t[attrname]=r[attrname];for(attrname in e)t[attrname]=e[attrname];return t},sql2Dataset:function(r){var e=this.simpleMerge({jndiName:"java:/jdbc/FluigDS",sql:"",log:0},r),t=null,n=null,a=DatasetBuilder.newDataset();try{e.log&&log.info("** Obtendo conexao "+e.jndiName),t=(new javax.naming.InitialContext).lookup(e.jndiName).getConnection(),n=t.createStatement(),e.log&&log.info("** Executando query "+e.sql),rs=n.executeQuery(e.sql);for(var o=rs.getMetaData(),l=!0;rs.next();){for(var i=[],s=1;s<=o.getColumnCount();s++){var u=o.getColumnLabel(s),g=rs.getString(u);e.log>1&&log.info("** Valor "+u+":"+g),i.push(g),l&&(e.log&&log.info("** Agregando coluna "+u),a.addColumn(u))}l=!1,a.addRow(i)}}catch(m){this.error(m)}finally{null!=n&&n.close(),null!=t&&t.close()}return a},whereHelper:function(r){var e=this.simpleMerge({constraints:[],filtros:{},log:0},r),t="1=1 ";try{var n=function(r,e){if(null!=e)for(var t=0;t<e.length;t++)if(e[t].fieldName==r)return e[t];return null};e.log&&log.error("*** Array de constraints:"+e.constraints);for(attrname in e.filtros){var a=n(attrname,e.constraints);e.log&&log.error("***  Buscando Constraint de `"+attrname+"`:"+a),null!=a&&(t+=e.filtros[attrname](a))}}catch(o){throw"Error whereHelper:"+o.message}return t}})',
	                "TNU"]);	
	
	dataset.addRow(["com.totvsNacoesUnidas.fluig.js.ds.Dataset",
	                "ds",
	                "1",
	                "0",
	                '({error:function(e){log.error("*** com.totvsNacoesUnidas.fluig.js.ds.Dataset: "+e);var t=DatasetBuilder.newDataset();log.error(e);t.addColumn("error");t.addRow(new Array(e));return t},simpleMerge:function(e,t){var n={};for(attrname in e){n[attrname]=e[attrname]}for(attrname in t){n[attrname]=t[attrname]}return n},whereHelper:function(e){var t=this.simpleMerge({constraints:[],filtros:{},log:0},e);var n=" 1=1 ";try{var r=function(e,t){if(t!=null){for(var n=0;n<t.length;n++){if(t[n].fieldName==e){return t[n]}}}return null};if(t.log)log.error("*** Array de constraints:"+t.constraints);for(attrname in t.filtros){var i=r(attrname,t.constraints);if(t.log)log.error("***  Buscando Constraint de `"+attrname+"`:"+i);if(i!=null){n+=t.filtros[attrname](i)}}}catch(s){throw"Error whereHelper:"+s.message}return n}})',
	                "TNU"]);
	
	dataset.addRow(["com.totvsNacoesUnidas.fluig.js.ds.Progress",
	                "pro",
	                "1",
	                "0",
	                '({consultaDinamica:funtion(k){var a=liv.ds.simpleMerge({table:"",fields:{},maxRows:150,where:"",orderBy:"",log:0,nameService:"TNUConsultadinamica",nameMethod:"TNUConsultaDinamica",tableResult:"ttResultado",Columns:30},k);var l=DatasetBuilder.newDataset();var o;try{var b=ServiceManager.getService(a.nameService);var q=b.getBean();o=q.createProDataGraphHolder();var n="";for(attrname in a.fields){n=n+" "+attrname}q.getProxy()[a.nameMethod](a.table,a.where,n,a.orderBy,a.maxRows,o)}catch(p){return liv.ds.error("Erro na comunicacao com o Progress OpenEdge: "+p)}try{var r={};var g={};if(a.log){log.error("*** Listando Colunas Temp-Table...")}var s=o.getProDataGraphValue().getMetaData().getTableMetaData(0);for(i=0;i<s.getFieldCount();i++){if(a.log>1){log.error("***-  property["+i+"]:`"+s.getFieldName(i)+"`")}r[s.getFieldName(i)]={}}if(a.log>1){log.error("*** Colunas da temp-table:"+Object.keys(r))}if(a.log>1){log.error("*** Colunas dos parametros:"+Object.keys(a.fields))}if(Object.keys(a.fields).length>0){for(attrname in a.fields){if(a.fields[attrname].customColumn||Object.keys(r).indexOf(attrname)!=-1){g[attrname]=a.fields[attrname]}else{log.error("*** tnu_consultaDinamica: A columna `"+attrname+"` no existe na tabela "+a.table)}}}else{g=r}if(a.log>1){log.error("*** Colunas do DS:"+Object.keys(g))}for(attrname in g){if(g[attrname].dsColumn){l.addColumn(g[attrname].dsColumn)}else{l.addColumn(attrname)}}if(a.log){log.error("*** Carregando resultados ...")}var d=o.getProDataGraphValue().getProDataObjects(a.tableResult);for(i=0;i<d.size();i++){var c=d.get(i);var j=new Array();var m={};for(attrname in g){var h;if(g[attrname].customColumn){h=g[attrname].customColumn(m)}else{h=c.get(attrname)}if(a.log>1){log.error("*** column `"+attrname+"` valor ori:"+h+" tipo:"+this.getTipo(h))}if(g[attrname].convert){h=g[attrname].convert(h);if(a.log>1){log.error("*** column `"+attrname+"`  valor convertido:"+h)}}else{if(h instanceof org.eclipse.emf.ecore.util.EDataTypeUniqueEList){if(a.log>1){log.error("*** column `"+attrname+"` convertendo org.eclipse.emf.ecore.util.EDataTypeUniqueEList...")}var f=java.text.NumberFormat.getCurrencyInstance();h=f.format(new java.lang.Double(h.toArray()[0]))}}if(a.log>1){log.error("*** column `"+attrname+"` valor ds:"+h+" tipo:"+this.getTipo(h))}j.push(h);m[attrname]=h}l.addRow(j)}}catch(p){return liv.ds.error("Error cargando registros desde Progress OpenEdge: "+p)}if(a.log){log.error("*** FIM Carregando resultados ...")}return l},getTipo:function(a){return(a["class"]?a.getClass():"obj javascript")}})',
	                "TNU"]);
	
	dataset.addRow(["com.totvsNacoesUnidas.fluig.js.ds.CustomEmail",
	                "mail",
	                "1",
	                "0",
	                '({simpleMerge:function(a,t){var e={};for(attrname in a)e[attrname]=a[attrname];for(attrname in t)e[attrname]=t[attrname];return e},sendCustomEmail:function(a){var t=this.simpleMerge({companyId:"1",subject:"",from:"",to:"",templateId:"",templateDialect:"",templateHtml:"",dados:{},log:0},a),e="text/html",o=new java.util.HashMap,n=java.io.File.separator,l=(new javax.naming.InitialContext).lookup("java:global/fluig/ecm-ejb/wdk/GlobalParam"),m=l.read(t.companyId).getTemplatesFolder()+n+"tplmail"+n+t.templateId+n+t.templateDialect,r=(new javax.naming.InitialContext).lookup("java:global/fluig/wcm-core/service/SDK");if(o.put("SERVER_URL",r.getServerURL()),o.put("SERVER_EXTERNAL_URL",r.getServerContextURL()),o.put("SERVER_PROTECTED_URL",r.getProtectedTenantContextPath()),o.put("COMPANY_ID",t.companyId),t.dados)for(param in t.dados)o.put(param,t.dados[param]);com.fluig.foundation.mail.EMailSenderFactory.getEMailSender().customEmail(new java.lang.Long(t.companyId),t.subject,t.from,t.to,m,t.templateHtml,e,o)}})',
	                "TNU"]);
	
	return dataset;
}