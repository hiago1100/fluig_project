{"version":3,"sources":["custom.js"],"names":["app","angular","module","controller","$scope","$http","$timeout","totvsService","fluigService","templatesDir","atualizaFormulario","then","atualizaEtapa","resultFieldsUsuario","resultFieldsDespesa","resultFieldsCcusto","Formulario","today","Date","Params","etapa","edit","$","hide","loading","FLUIGC","textMessage","show","Usuarios","getUsuarios","u","map","x","colleagueId","toString","indexOf","responsavel","solicitante","Despesas","getParametroDespesas","Ccustos","getCcustoUsuario","mail","Estabelecimentos","getEstabelecimento","formMode","Geral","viajante","DespesaIds","selecionaViajante","fadeIn","forEach","despesa","i","codigo","item","aprovarTudo","calculaTotalAprovador","getCcusto","Integracao","ttTitulo","relatorio","utilities","checkBrowser","isIe","addClass","totalAprovar","totalAprovado","totalReprovado","ccusto","aprovadorResponsavel","filter","displayKey","done","valorTotal","status","statusGeral","atualizaTotalDespesa","qtde","valor","d","removeDespesas","colaborador","getParametroUsuario","Usuario","getFuncionario","cod_empresa_ems","cod_rh_ccusto","estabelecimento","cod_estab_ems","cod_ccusto","unshift","adicionaDespesa","toggleDespesa","fluigId","wdkAddChild","editing","val","JSON","stringify","focus","removeDespesa","index","fnWdkRemoveChild","splice","saveEditDespesa","valorLimite","erro","obs","processDefinition","managerMode","aprovador","taskUserId","gestorCcustoViajante","message","toast","title","type","timeout","imprime","parent","WCMAPI","printModeView","window","print"],"mappings":"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","file":"custom.min.js","sourcesContent":["var app = angular.module('RDVApp', ['fluig.directives', 'angular.fluig', 'ngAnimate', 'totvs.service', 'fluig.service']);\n\napp.controller('RDVController', ['$scope', '$http', '$timeout', 'totvsService', 'fluigService',\n    function ($scope, $http, $timeout, totvsService, fluigService) {\n\n        $scope.templatesDir = fluigService.templatesDir + \"financeiro_rdv/\";\n\n        fluigService.atualizaFormulario($scope, [\"Geral\", \"DespesaIds\", \"Despesas\", \"Integracao\", \"Ccustos\"]).then(\n            function () {\n                $scope.atualizaEtapa();\n            }\n        )\n        $scope.resultFieldsUsuario = [\"colleagueName\", \"mail\", \"colleagueId\", \"colleaguePK.colleagueId\"];\n        $scope.resultFieldsDespesa = [\"contaContabil\", \"valorPadrao\", \"alteraValor\", \"descricao\", \"alteraQtde\", \"valorLimite\", \"qtdePadrao\", \"ativa\"];\n        $scope.resultFieldsCcusto = [\"cod_empresa\", \"cod_plano_ccusto\", \"cod_ccusto\", \"displayKey\", \"descricao\", \"responsavel\"];\n\n        $scope.atualizaEtapa = function () {\n\n            $scope.Formulario.today = new Date();\n\n            switch ($scope.Params.etapa) {\n                case 'inicio':\n                    if ($scope.Params.edit) {\n\n                        $(\"form\").hide();\n                        var loading = FLUIGC.loading('body', {\n                            textMessage: 'Aguarde...',\n                        });\n                        loading.show();\n\n                        $timeout(function () {\n                            $scope.Usuarios = fluigService.getUsuarios(null, $scope.resultFieldsUsuario);\n\n                            var u = $scope.Usuarios.map(function (x) {\n                                return x.colleagueId.toString();\n                            }).indexOf($scope.Params.responsavel);\n\n                            var solicitante = $scope.Usuarios[u];\n\n                            $scope.Despesas = fluigService.getParametroDespesas(null, $scope.resultFieldsDespesa);\n                            $scope.Ccustos = totvsService.getCcustoUsuario(solicitante.mail);\n                            $scope.Estabelecimentos = totvsService.getEstabelecimento();\n\n                            if ($scope.Params.formMode == \"ADD\") {\n                                $scope.Formulario.Geral = {\n                                    \"solicitante\": solicitante,\n                                    \"viajante\": solicitante\n                                }\n                                $scope.Formulario.Despesas = [];\n                                $scope.Formulario.DespesaIds = [];\n\n                                $scope.selecionaViajante();\n                            }\n\n                            $(\"form\").fadeIn();\n                            loading.hide();\n\n                        }, 1000)\n\n                    }\n\n                    break;\n\n                case 'revisarSolicitacao':\n\n                    $(\"form\").hide();\n                    var loading = FLUIGC.loading('body', {\n                        textMessage: 'Aguarde...',\n                    });\n                    loading.show();\n\n                    $timeout(function () {\n                        var solicitante = fluigService.getUsuarios($scope.Params.responsavel, $scope.resultFieldsUsuario)[0];\n\n                        $scope.Despesas = fluigService.getParametroDespesas(null, $scope.resultFieldsDespesa);\n                        $scope.Ccustos = totvsService.getCcustoUsuario(solicitante.mail);\n                        $scope.Estabelecimentos = totvsService.getEstabelecimento();\n\n                        angular.forEach($scope.Formulario.Despesas, function (despesa, i) {\n\n                            var i = $scope.Despesas.map(function (x) {\n                                return x.codigo;\n                            }).indexOf(despesa.item.codigo);\n\n                            despesa.item = $scope.Despesas[i];\n\n                        })\n\n                        $(\"form\").fadeIn();\n                        loading.hide();\n                    }, 1000)\n\n                    break;\n\n                case 'aprovarDespesasCcusto':\n                    $scope.aprovarTudo();\n                    $scope.calculaTotalAprovador();\n                    break;\n\n                case 'aprovarDespesasGestor':\n                    $scope.aprovarTudo();\n                    $scope.calculaTotalAprovador();\n\n                    break;\n\n                case 'analisarErrosIntegracao':\n                    $(\"form\").hide();\n                    var loading = FLUIGC.loading('body', {\n                        textMessage: 'Aguarde...',\n                    });\n                    loading.show();\n\n                    $timeout(function () {\n                        $scope.Despesas = fluigService.getParametroDespesas();\n                        $scope.Ccustos = totvsService.getCcusto();\n                        $scope.Estabelecimentos = totvsService.getEstabelecimento();\n\n                        $(\"form\").fadeIn();\n                        loading.hide();\n                    }, 1000)\n\n                    break;\n            }\n\n            if ($scope.Formulario.Integracao && $scope.Formulario.Integracao.ttTitulo) $scope.Params.relatorio = true;\n\n            if (FLUIGC.utilities.checkBrowser().isIe()) {\n                $(\"body\").addClass(\"ie\");\n            }\n        }\n\n        $scope.calculaTotalAprovador = function () {\n\n            $scope.Formulario.totalAprovar = 0;\n            $scope.Formulario.totalAprovado = 0;\n            $scope.Formulario.totalReprovado = 0;\n\n            angular.forEach($scope.Formulario.Ccustos, function (ccusto, i) {\n\n                if ($scope.aprovadorResponsavel(ccusto)) {\n\n                    $scope.Formulario.Despesas\n                        .filter(function (despesa) {\n                            return despesa.ccusto.displayKey == ccusto.displayKey\n                        })\n                        .forEach(function (despesa) {\n                            if (!despesa.done) $scope.Formulario.totalAprovar += despesa.valorTotal;\n                            if (despesa.status == 'A') $scope.Formulario.totalAprovado += despesa.valorTotal;\n                            if (despesa.status == 'R') $scope.Formulario.totalReprovado += despesa.valorTotal;\n                        });\n                }\n            })\n        }\n\n        $scope.aprovarTudo = function () {\n\n            angular.forEach($scope.Formulario.Ccustos, function (ccusto, i) {\n\n                if ($scope.aprovadorResponsavel(ccusto)) {\n                    $scope.statusGeral(ccusto, 'A');\n                }\n            })\n        }\n\n        $scope.atualizaTotalDespesa = function (despesa) {\n            if (despesa) despesa.valorTotal = despesa.qtde * despesa.valor;\n            $scope.Formulario.Geral.valorTotal = 0;\n            angular.forEach($scope.Formulario.Despesas, function (d) {\n                $scope.Formulario.Geral.valorTotal = $scope.Formulario.Geral.valorTotal + d.valorTotal;\n            })\n        }\n\n        $scope.selecionaViajante = function () {\n\n            $scope.removeDespesas();\n\n            if (typeof $scope.Formulario.Geral.viajante == \"object\") {\n                $scope.Formulario.Geral.viajante.colaborador = fluigService.getParametroUsuario($scope.Formulario.Geral.viajante.colleagueId)[0];\n\n                if (!$scope.Formulario.Geral.viajante.colaborador) {\n                    $scope.Formulario.Geral.viajante.colaborador = totvsService.getFuncionario($scope.Formulario.Geral.viajante.mail)[0];\n                    if ($scope.Formulario.Geral.viajante.colaborador) {\n                        $scope.Formulario.Geral.viajante.colaborador.ccusto = totvsService.getCcusto($scope.Formulario.Geral.viajante.colaborador.cod_empresa_ems, null, $scope.Formulario.Geral.viajante.colaborador.cod_rh_ccusto)[0];\n                        $scope.Formulario.Geral.viajante.colaborador.estabelecimento = totvsService.getEstabelecimento($scope.Formulario.Geral.viajante.colaborador.cod_empresa_ems, $scope.Formulario.Geral.viajante.colaborador.cod_estab_ems)[0];\n\n                    }\n                } else {\n                    $scope.Formulario.Geral.viajante.colaborador = $scope.Formulario.Geral.viajante.colaborador.Usuario;\n                }\n\n                if ($scope.Formulario.Geral.viajante.colaborador) {\n                    $scope.Formulario.Geral.estabelecimento = $scope.Formulario.Geral.viajante.colaborador.estabelecimento;\n\n                    if ($scope.Formulario.Geral.viajante.colaborador.ccusto) {\n                        var i = $scope.Ccustos.map(function (x) {\n                            return x.cod_ccusto;\n                        }).indexOf($scope.Formulario.Geral.viajante.colaborador.ccusto.cod_ccusto);\n\n                        if (i < 0) {\n                            $scope.Ccustos.unshift($scope.Formulario.Geral.viajante.colaborador.ccusto);\n                        }\n                    }\n                    $scope.adicionaDespesa();\n                }\n\n            }\n        }\n\n        $scope.adicionaDespesa = function () {\n\n            $scope.toggleDespesa();\n\n            var fluigId = wdkAddChild(\"Despesas\");\n\n            $scope.Formulario.DespesaIds.unshift(fluigId);\n            $scope.Formulario.Despesas.unshift({\n                \"fluigId\": fluigId,\n                \"ccusto\": $scope.Formulario.Geral.viajante.colaborador.ccusto,\n                \"editing\": true\n            });\n\n            $(\"#despesa___\" + fluigId).val(JSON.stringify($scope.Formulario.Despesas[0]));\n\n            $timeout(function () {\n\n                if ($(\"#despesaItem\")[0])\n                    $(\"#despesaItem\")[0].focus();\n            }, 100)\n        }\n\n        $scope.removeDespesa = function (index) {\n            fnWdkRemoveChild($(\"#despesa___\" + $scope.Formulario.Despesas[index].fluigId)[0]);\n            $scope.Formulario.DespesaIds.splice(index, 1);\n            $scope.Formulario.Despesas.splice(index, 1);\n            $scope.atualizaTotalDespesa();\n        }\n        $scope.removeDespesas = function () {\n            angular.forEach($scope.Formulario.Despesas, function (despesa, index) {\n                $scope.removeDespesa(index);\n            })\n        }\n\n\n        $scope.saveEditDespesa = function (despesa) {\n            if (!despesa.item) {\n                $scope.erro(\"Informe a despesa\");\n                return;\n            }\n\n            if (!despesa.ccusto) {\n                $scope.erro(\"Informe o centro de custo\");\n                return;\n            }\n\n            if (!despesa.valorTotal || despesa.valorTotal == 0) {\n                $scope.erro(\"Informe o valor\");\n                return;\n            }\n\n            if (despesa.item.valorLimite > 0 && despesa.valorTotal > despesa.item.valorLimite) {\n                $scope.erro(\"Valor da despesa maior que o limite\");\n                return;\n            }\n\n            if (!despesa.obs || despesa.obs == \"\") {\n                $scope.erro(\"Informe as observações\");\n                return;\n            }\n\n            if (despesa.editing) {\n                despesa.editing = false;\n                $(\"#btnAddDespesa\").focus();\n            } else {\n                despesa.editing = true;\n            }\n        }\n\n        $scope.toggleDespesa = function () {\n            angular.forEach($scope.Formulario.Despesas, function (despesa) {\n                despesa.editing = false;\n            })\n        }\n\n        $scope.aprovadorResponsavel = function (ccusto) {\n\n            if ($scope.processDefinition.managerMode) return true;\n\n            if ($scope.Params.etapa == 'aprovarDespesasCcusto') {\n                return ccusto.aprovador.colleagueId == $scope.Params.responsavel || ccusto.aprovador.colleagueId == $scope.processDefinition.taskUserId;\n            } else {\n                if ($scope.Params.etapa == 'aprovarDespesasGestor') {\n                    return $scope.Formulario.Geral.gestorCcustoViajante == $scope.Params.responsavel || $scope.Formulario.Geral.gestorCcustoViajante == $scope.processDefinition.taskUserId;\n                }\n            }\n            return false;\n        }\n\n        $scope.statusGeral = function (ccusto, status) {\n            angular.forEach($scope.Formulario.Despesas, function (despesa, i) {\n                if (despesa.ccusto.cod_ccusto == ccusto.cod_ccusto && !despesa.done) {\n\n                    despesa.status = status;\n                }\n            })\n        }\n\n        $scope.erro = function (message) {\n            FLUIGC.toast({\n                title: 'Erro',\n                message: message,\n                type: 'warning',\n                timeout: 7000\n            });\n        }\n        $scope.imprime = function () {\n            if (parent.WCMAPI) {\n\n                if (parent.WCMAPI.isIe()) {\n                    printModeView();\n                } else {\n                    window.print();\n                }\n            } else {\n                window.print();\n            }\n        }\n    }\n]);"],"sourceRoot":"/source/"}